language: ruby
cache: bundler
addons:
  postgresql: '9.3'
before_install:
- export TZ=Europe/London
- export PHANTOMJS_BIN=/home/travis/.phantomjs/2.1.1/x86_64-linux/bin
- mkdir $PHANTOMJS_BIN
- wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2 -O $PHANTOMJS_BIN/phantomjs-2.0.0-ubuntu-12.04.tar.bz2
- tar -xvf $PHANTOMJS_BIN/phantomjs-2.0.0-ubuntu-12.04.tar.bz2 -C $PHANTOMJS_BIN
- rm -rf $PHANTOMJS_BIN/phantomjs-2.0.0-ubuntu-12.04.tar.bz2
- export PATH=$PHANTOMJS_BIN:$PATH
before_script:
  - psql -c 'create database travis_ci_test;' -U postgres
  - cp config/database.yml.travis config/database.yml
# Please don't add extra test commands here unless they are Travis only -- Jenkins will run this script too
script: bash ./runtests.sh
# deploy:
#   provider: heroku
#   api_key:
#     secure: XLE9lmmig5XRSZPIxQF7lVuDYyDeC5sabWWUkr0rQihOK5UHumURuw444eaaaHYbr8cGK+SxptOlTaO94pSvQtbvYrAzEgzSKOwRQ2sah6VePTHiww0nKVOHSIVplrJ64fJBu3I/OPaSLkkoRMWDSKU8beWJKVZvDco37YZcRmI=
#   app: crime-billing-online-dev
#   on:
#     repo: ministryofjustice/advocate-defence-payments
#     branch: develop
#   run:
#     - "rake db:clear"
#     - "rake db:migrate"
