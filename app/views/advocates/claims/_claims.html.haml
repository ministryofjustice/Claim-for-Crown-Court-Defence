- if claims.none?
  %p No claims found
- else
  %table.claims_table
    %thead
      %th
        = t("activerecord.attributes.claim.messages")
      - if current_user.persona.admin?
        %th
          = t("activerecord.models.advocate")
      %th
        = t("activerecord.attributes.claim.defendants")
      %th
        = t("activerecord.attributes.claim.cms_number")
      - unless includes_state?(claims,'draft')
        %th
          = t("activerecord.attributes.claim.submission_date")
      - unless includes_state?(claims,'draft,rejected,submitted,allocated,awaiting_info_from_court')
        %th
          = t("activerecord.attributes.claim.paid_date")
      %th.currency
        = t("activerecord.attributes.claim.total")
      - if includes_state?(claims,'part_paid,completed')
        %th.currency
          = t("activerecord.attributes.claim.amount_assessed")
      %th
    %tbody
    - claims.each do |claim|
      %tr{id: dom_id(claim)}
        %td
          = link_to claim.messages.count, "#{advocates_claim_path(claim)}#messages"
        - if current_user.persona.admin?
          %td
            = claim.advocate.name
        %td
          = claim.defendants.map(&:name).join(', ')
        %td
          = claim.cms_number
        - unless includes_state?(claims,'draft')
          %td
            = claim.submitted_at.strftime('%d/%m/%Y') unless claim.submitted_at.nil?
        - unless includes_state?(claims,'draft,rejected,submitted,allocated,awaiting_info_from_court')
          %td
            = claim.paid_at.strftime('%d/%m/%Y') unless claim.paid_at.nil?
        %td.currency
          = number_to_currency(claim.total)
        - if includes_state?(claims,'part_paid,completed')
          %td.currency
            = number_to_currency(claim.amount_assessed)
        %td
          = link_to 'View', advocates_claim_path(claim)
          - if claim.editable?
            |
            = link_to 'Edit', edit_advocates_claim_path(claim)
          |
          = link_to 'Delete', advocates_claim_path(claim), method: :delete, data: { confirm: 'Are you sure?' }
        %td
          - if claim.state == 'awaiting_info_from_court'
            = image_tag "#{claim.state.gsub('_','-')}.png", alt: claim.state.humanize, class: "status-indicator", title: claim.state.humanize
