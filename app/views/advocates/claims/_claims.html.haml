- if claims.none?
  %p No claims found
- else
  %table.claims_table
    %thead
      %th
        Messages
      - if current_user.persona.admin?
        %th
          Advocate
      %th
        Defendants
      %th
        CMS Number
      - unless includes_state?(claims,'draft')
        %th
          Submission date
      - unless includes_state?(claims,'draft,rejected,submitted,allocated,awaiting_info_from_court')
        %th
          Paid date
      %th.currency
        Claim total
      - if includes_state?(claims,'part_paid,completed')
        %th.currency
          Amount assessed
      %th
    %tbody
    - claims.each do |claim|
      - present(claim) do |claim_presenter|
        %tr{id: dom_id(claim)}
          %td
            = link_to claim.messages.count, "#{advocates_claim_path(claim)}#messages"
          - if current_user.persona.admin?
            %td
              = claim.advocate.name
          %td
            = claim_presenter.defendant_names
          %td
            = claim.cms_number
          - unless includes_state?(claims,'draft')
            %td
              = claim_presenter.submitted_at
          - unless includes_state?(claims,'draft,rejected,submitted,allocated,awaiting_info_from_court')
            %td
              = claim_presenter.paid_at
          %td.currency
            = claim_presenter.total
          - if includes_state?(claims,'part_paid,completed')
            %td.currency
              = claim_presenter.amount_assessed
          %td
            = link_to 'View', advocates_claim_path(claim)
            - if claim.editable?
              |
              = link_to 'Edit', edit_advocates_claim_path(claim)
            |
            = link_to 'Delete', advocates_claim_path(claim), method: :delete, data: { confirm: 'Are you sure?' }
          %td
            - if claim.state == 'awaiting_info_from_court'
              = claim_presenter.status_image class: 'status-indicator'
