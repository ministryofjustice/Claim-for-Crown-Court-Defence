- if claims.none?
  %p No claims found
- else
  %table.claims_table
    %thead
      %th
        Messages
      - if current_user.persona.admin?
        %th
          Advocate
      %th
        Defendants
      %th
        CMS Number
      - if claims.map(&:state).uniq != ['draft']
        %th
          Submission date
      - if claims.map(&:state).uniq != ['draft'] && claims.map(&:state).uniq != ['rejected'] && claims.map(&:state).uniq != ['submitted','allocated']
        %th
          Paid date
      %th.currency
        Claim total
      - if claims.map(&:state).uniq == ['part_paid'] || claims.map(&:state).uniq == ['completed']
        %th.currency
          Amount assessed
      %th
    %tbody
    - claims.each do |claim|
      %tr{id: dom_id(claim)}
        %td
          = link_to claim.messages.count, "#{advocates_claim_path(claim)}#messages"
        - if current_user.persona.admin?
          %td
            = claim.advocate.name
        %td
          = claim.defendants.map(&:name).join(', ')
        %td
          = claim.cms_number
        %td
          = claim.submitted_at.strftime('%d/%m/%Y') unless claim.submitted_at.nil?
        %td
          = claim.paid_at.strftime('%d/%m/%Y') unless claim.paid_at.nil?
        %td.currency
          = number_to_currency(claim.total)
        - if claims.map(&:state).uniq == ['part_paid'] || claims.map(&:state).uniq == ['completed']
          %td.currency
            = number_to_currency(claim.amount_assessed)
        %td
          = link_to 'View', advocates_claim_path(claim)
          - if claim.editable?
            |
            = link_to 'Edit', edit_advocates_claim_path(claim)
          |
          = link_to 'Delete', advocates_claim_path(claim), method: :delete, data: { confirm: 'Are you sure?' }
