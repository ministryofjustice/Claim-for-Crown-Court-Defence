= render partial: 'layouts/header', locals: { page_heading: t('.h1_managment_info') }

- @available_report_types.each do |report_type, report|
  - report_name = t(".report_types.#{report_type}")
  .form-section
    %h2.heading-large{id: "heading-#{report_type}"}
      = report_name
    %p{role: 'group', "aria-labelledby": "heading-#{report_type}"}
      - if report&.started_at
        = t('.report_generated_at', time: report.started_at.strftime('%a %d %b %Y at %H:%M:%S'))
      - else
        = t('.unavailable_report')
    %p
      - if report&.started_at.present?

        = link_to t('.download'), case_workers_admin_management_information_download_url(report_type: report_type, format: :csv), class: 'button btn-spacer-20'

      = link_to t('.regenerate'), case_workers_admin_management_information_generate_url(report_type: report_type), class: 'button'

.form-section#provisional-assessment-date
  .form-group
    %h2.heading-large
      = t('.provisional_assessments_by_date')
    .form-group
      .report-status
        = hidden_field_tag :user_api_key, @current_user.api_key
        = t('.report_information')
    .form-group
      .report_inputs
        .form-group
          %fieldset
            %legend
              %span.form-label-bold
                = label_tag(:start_date, t('.start_date'))
              %span.form-hint
                = t('.date_hint')
            .form-date
              .form-group{style: 'width: auto;'}
                = date_field_tag(:start_date, nil, class: 'provisional_assessments_date_field')
        .form-group
          %fieldset
            %legend
              %span.form-label-bold
                = label_tag(:end_date, t('.end_date'))
              %span.form-hint
                = t('.date_hint')
            .form-date
              .form-group{style: 'width: auto;'}
                = date_field_tag(:end_date, nil, class: 'provisional_assessments_date_field')

  .form-group
    = link_to t('.download'), "", class: 'button disabled', id: 'provisional_assessments_date_download'


%p.panel.panel-border-wide
  = t('.report_instuctions')
