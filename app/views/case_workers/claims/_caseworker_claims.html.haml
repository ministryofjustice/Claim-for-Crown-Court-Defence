%table#claims-list
  %thead
    %tr
      %th
      %th
        Case number
      %th
        Advocate
      %th
        Defendant(s)
      %th{:title => "Including VAT"}
        Claim Total
      %th
        Date
      %th
        Status
      %th.message-placeholder
  %tbody
    - @claims.each do |claim_object|
      - present(claim_object) do | claim |
        %tr
          %td
          %td
            = link_to claim.case_number , case_workers_claim_path(claim),{:class => 'js-test-case-number-link'}
          %td
            = claim.advocate.user.name
          %td
            = claim.defendant_names
          %td.js-test-total
            = claim.total_inc_vat
          %td
            = claim.submitted_at(include_time: false) unless claim.draft?
          %td
            = "Current (WIP)"
          %td
            - if claim.has_unread_messages_for?(current_user)
              %object{:type => 'image/svg+xml', :data => image_path('unread-message.svg'), :class => 'message'}
            - elsif claim.messages.any?
              %object{:type => 'image/svg+xml', :data => image_path('read-message.svg'), :class => 'message'}
            - else
              %span.message-placeholder
