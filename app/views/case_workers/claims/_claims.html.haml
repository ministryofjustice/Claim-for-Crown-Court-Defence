%table#claims-list
  %thead
    %tr
      %th
      %th
        Case number
      %th
        Advocate
      %th
        Defendant(s)
      %th{:title => "Including VAT"}
        Claim Total
      - if params[:action] == 'archived'
        %th
          Status
      %th
        Date
      %th.message-placeholder
  %tbody
    - @claims.each do |claim_object|
      - present(claim_object) do | claim |
        %tr
          %td
          %td
            = link_to claim.case_number , case_workers_claim_path(claim),{:class => 'js-test-case-number-link'}
          %td
            = claim.advocate.user.name
          %td
            = claim.defendant_names
          %td.js-test-total
            = claim.total_inc_vat
          - if params[:action] == 'archived'
            %td
              = claim.state.humanize
          %td
            = claim.submitted_at(include_time: false) unless claim.draft?
          %td.messages
            - if claim.messages.any?
              = link_to "View", "#{case_workers_claim_path(claim)}#messages"
              - if claim.has_unread_messages_for?(current_user)
                %object{:type => 'image/svg+xml', :data => image_path('messaging-red.svg'), :class => "new-message"}
            - else
              %span.none
                = "None"
