.claim-count
  = "Number of claims: "
  = @claims.total_count
%table.report
  %thead
    %tr
      %th
        = t(".case_number")
      %th
        = t(".advocate")
      %th
        = t(".defendants")
      %th{:title => "Including VAT"}
        = t(".total")
      - if params[:action] == 'archived'
        %th
          = t(".status")
      %th
        = "Type"
      %th
        = t(".submission_date")
      %th.message-placeholder
        = t(".messages")
  %tbody
    - @claims.each do |claim_object|
      - present(claim_object) do |claim|
        %tr{class: "#{claim.opened_for_redetermination? ? 'opened_for_redetermination': nil}" }
          %td
            = link_to claim.case_number , case_workers_claim_path(claim),{:class => 'js-test-case-number-link'}
          %td
            = claim.advocate.user.name
          %td
            = claim.defendant_names
          %td.js-test-total
            = claim.total_inc_vat
          - if params[:action] == 'archived'
            %td
              = claim.state.humanize
          %td
            = claim.opened_for_redetermination? ? claim.case_type.name + "\n(redetermination)" : claim.case_type.name
          %td
            = claim.submitted_at(include_time: false) unless claim.draft?
          %td.messages
            - if claim.messages.any?
              = link_to "View", "#{case_workers_claim_path(claim)}#messages"
              - if claim.has_unread_messages_for?(current_user)
                %object{:type => 'image/svg+xml', :data => image_path('messaging-red.svg'), :class => "new-message"}
            - else
              %span.none
                = "None"
