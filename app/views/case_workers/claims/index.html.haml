%nav.dashboard-tabs
  %ul
    %li{class: ('active' if params[:tab] == 'current' || params[:tab].blank?)}
      = link_to 'Current claims', case_workers_claims_path(params.merge(tab: 'current'))
    %li{class: ('active' if params[:tab] == 'completed')}
      = link_to 'Completed claims', case_workers_claims_path(params.merge(tab: 'completed'))

%section
  %h1
    - if params[:tab] == 'completed'
      Completed claims
      (#{@claims.count})
    - else
      Current claims
      (#{@claims.count})

#list-controls
  %nav
    %h3
      Sort by:
    %ul
      %li{class: ('active' if params[:sort].blank? && params[:direction].blank?) || (params[:sort] == 'submitted_at' && params[:direction] == 'asc')}
        = link_to 'Oldest', case_workers_claims_path(params.merge(sort: 'submitted_at', direction: 'asc'))
      %li{class: ('active' if params[:sort] == 'submitted_at' && params[:direction] == 'desc')}
        = link_to 'Newest', case_workers_claims_path(params.merge(sort: 'submitted_at', direction: 'desc'))
      %li{class: ('active' if params[:sort] == 'total' && params[:direction] == 'desc')}
        = link_to 'Value - Highest first', case_workers_claims_path(params.merge(sort: 'total', direction: 'desc'))
      %li{class: ('active' if params[:sort] == 'total' && params[:direction] == 'asc')}
        = link_to 'Value - Lowest first', case_workers_claims_path(params.merge(sort: 'total', direction: 'asc'))

    = form_tag case_workers_claims_path, method: :get do
      = hidden_field_tag :tab, params[:tab]
      = hidden_field_tag :sort, params[:sort]
      = hidden_field_tag :direction, params[:direction]
      = text_field_tag :search, params[:search], placeholder: 'MAAT reference no.'
      = submit_tag 'Search', class: 'button'
- if @claims.none?
  %p
    - if params[:search].present?
      No claims found matching MAAT reference "#{params[:search]}"
    - else
      No claims found
- else
  %ul#claims-list
    - @claims.each do |claim|
      %li{ id: dom_id(claim) }
        = render claim

