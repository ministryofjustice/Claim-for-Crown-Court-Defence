%tbody.disbursement-group
  %tr.nested-fields

    %td
      %a{name: "disbursement_#{@disbursement_count}_disbursement_type"}
      = f.collection_select :disbursement_type_id, DisbursementType.all, :id, :name, {prompt: true}, {class: 'select2', style: 'width:350px'}
      = validation_error_message(@error_presenter, "disbursement_#{@disbursement_count}_disbursement_type")
    %td
      %a{name: "disbursement_#{@disbursement_count}_net_amount"}
      %div.pound-wrapper
        = f.label :rate, '£', class: 'pound-sign bold-xsmall'
        = f.text_field :net_amount, value: number_with_precision(f.object.net_amount, precision: 2), data: { calculator: 'net' }, size: 10, maxlength: 8
      = validation_error_message(@error_presenter, "disbursement_#{@disbursement_count}_net_amount")
    %td
      %a{name: "disbursement_#{@disbursement_count}_vat_amount"}
      %div.pound-wrapper
        = f.label :rate, '£', class: 'pound-sign bold-xsmall'
        = f.text_field :vat_amount, value: number_with_precision(f.object.vat_amount, precision: 2), data: { calculator: 'vat' }, size: 10, maxlength: 8
      = validation_error_message(@error_presenter, "disbursement_#{@disbursement_count}_vat_amount")
    %td{data:{ calculator: 'total' }}
      = number_to_currency(f.object.total)
    %td.remove-disbursement
      = link_to_remove_association t('.remove'), f, { wrapper_class: 'disbursement-group' }
