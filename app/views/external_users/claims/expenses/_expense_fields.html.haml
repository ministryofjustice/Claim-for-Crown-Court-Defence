%tbody.expense-group
  %tr.nested-fields
    %td
      %div
        Expense type:
        %a{name: "expense_#{@expense_count}_expense_type"}
        = f.collection_select :expense_type_id, ExpenseType.for_claim_type(@claim), :id, :name, {prompt: true}, {class: 'select2', style: 'width:300px'}
        = validation_error_message(@error_presenter, "expense_#{@expense_count}_expense_type")

      %div
        Destination / postcode:
        %a{name: "expense_#{@expense_count}_location"}
        = f.text_field :location
        = validation_error_message(f.object, :location)

      %div
        Reason for travel (hardcoded for now, dependent on chosen Expense Type):
        %a{name: "expense_#{@expense_count}_reason_id"}
        = f.collection_select :reason_id, ExpenseType::REASON_SET_A.values, :id, :reason, {prompt: true}, {class: 'select2', style: 'width:300px'}
        = validation_error_message(@error_presenter, "expense_#{@expense_count}_reason_id")

      %div
        Distance:
        %a{name: "expense_#{@expense_count}_quantity"}
        = f.number_field :quantity, class: 'quantity', min: 0, max: 999, maxlength: 3
        = validation_error_message(@error_presenter, "expense_#{@expense_count}_quantity")

      %div
        Rate:
        %a{name: "expense_#{@expense_count}_rate"}
        .pound-wrapper
          = f.label :rate, 'Â£', class: 'pound-sign bold-xsmall'
          = f.text_field :rate, value: number_with_precision(f.object.rate, precision: 2), class: 'rate', size: 10, maxlength: 8
        = validation_error_message(@error_presenter, "expense_#{@expense_count}_rate")

      %div
        Amount:
        = number_to_currency(f.object.amount)

    %td.remove-expense
      = link_to_remove_association t('.remove'), f, { wrapper_class: 'expense-group' }
