%fieldset
  #offence
    - i18n_scope = %i[external_users claims case_details fields]
    .form-row.js-typeahead
      .form-col.form-col-two-thirds{class: error_class?(@error_presenter, :offence)}
        = f.anchored_label t(:offence_category, scope: i18n_scope),
          'offence_category_description_input',
          { label_attributes: { class: 'form-label' } }
        .form-hint.xsmall.zero-vert-margin
          = t(:offence_category_hint, scope: i18n_scope)
        - if @claim.new_record?
          - selected_offence_category = params[:offence_category].present? ? params[:offence_category][:description] : nil
        - else
          - selected_offence_category = @claim.offence.description rescue nil

        = collection_select :offence_category,
                              :description,
                              @offence_descriptions,
                              :description, :description,
                              { include_blank: ''.html_safe, selected: selected_offence_category },
                              { class: 'form-control typeahead', id: 'claim_offence_category_description' }
        = validation_error_message(@error_presenter, :offence)

    .form-row
      .form-col.form-col-two-thirds{class: error_class?(@error_presenter, :offence_class)}
        .offence-class-select
          = render 'external_users/claims/case_details/offence_select', offences: @offences
        = f.hidden_field :offence_id
