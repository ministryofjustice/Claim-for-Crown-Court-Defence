- present(claim) do |claim_presenter|
  %section
    - if claim.case_workers.any? && CaseWorker === current_user.persona && current_user.persona.admin?
      %p
        %strong
          Assigned to:
        = claim_presenter.case_worker_names
    %ul.case-data
      %li
        %h3{ class: controller.action_name == 'show' ? "" : "repeated" }
          Case
        %dl
          %dt
            Defendant name
          %dd
            = claim_presenter.defendant_names
          %dt
            Rep order date
          %dd
            - if claim.defendants.any?
              = claim_presenter.representation_order_dates
          %dt
            Advocate account number
          %dd
            = claim.advocate.account_number
          %dt
            Case submitted
          %dd
            = claim_presenter.submitted_at(include_time: true) unless claim.draft?
          - if controller.action_name == 'show'
            %dt
              Case number
            %dd
              = claim.case_number
            %dt
              Case Type
            %dd
              = claim.case_type.humanize
            %dt
              Case Worker
            %dd
              = claim_presenter.case_worker_email_addresses
            %dt
              = t('maat_reference_number')
            %dd
              = claim_presenter.maat_references
            %dt
              Offence
            %dd
              - if claim.offence
                = claim.offence.description
            %dt
              Offence class
            %dd
              - if claim.offence
                = claim.offence.offence_class
      %li
        %h3{ class: controller.action_name == 'show' ? "" : "repeated" }
          Court
        %dl
          %dt
            Crown Court
          %dd
            - if claim.court
              = claim.court.name
          %dt
            Prosecuting authority
          %dd
            CPS
          %dt
            Retrial?
          %dd
            No
          %dt
            Judicial Apportionment
          %dd
            No
          - if controller.action_name == 'show'
            %dt
              Hearing
            %dd
              15/04/2 7
            %dt
              Advocate
            %dd
              = claim.advocate.email
            %dt
              Advocate Category
            %dd
              = claim.advocate_category

      - unless controller.action_name == 'show'
        %li
          %h3{ class: controller.action_name == 'show' ? "" : "repeated" }
            Case Value
          %dl
            %dt
              Expenses
            %dd
              = claim_presenter.expenses_total
            %dt
              Fees
            %dd
              = claim_presenter.fees_total
            %dt
              VAT
            %dt
              TOTAL
            %dd
              %span.value
                = claim_presenter.total
            %dt
              Paid on
            %dd
              = claim_presenter.paid_at(include_time: true)


    - unless controller.action_name == 'show'
      .claim-controls
        = link_to 'Detail', case_workers_claim_path(claim), class: 'detail-link'
