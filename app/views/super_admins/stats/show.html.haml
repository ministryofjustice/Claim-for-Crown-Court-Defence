= content_for :page_title, flush: true do
  = 'Stats'

= if @date_err == true
  .govuk-notification-banner{'aria-labelledby': 'govuk-date-error-notification-banner-title', 'data-module': "govuk-notification-banner", role: 'alert'}
    .govuk-notification-banner__content
      %h3.govuk-notification-banner__heading
        = 'Invalid Dates'
      %p.govuk-body
        = 'Please enter a valid set of dates'

.govuk-width-container
  .govuk-grid-row
  = form_with url: super_admins_stats_path, builder: GOVUKDesignSystemFormBuilder::FormBuilder, method: 'post' do |f|
    .govuk-grid-column-one-third
      = f.govuk_date_field :date_from, legend: { size: 'm',
                                                 tag: 'h2',
                                                 text: 'From'},
                                       maxlength_enabled: true

    .govuk-grid-column-one-third
      = f.govuk_date_field :date_to, legend: { size: 'm',
                                                 tag: 'h2',
                                                 text: 'To'},
                                       maxlength_enabled: true
    .govuk-grid-column-full
      = f.govuk_submit 'Update'

  .govuk-grid-column-full
    %br

  .govuk-grid-row
    .govuk-grid-column-one-half
      %h2
        = "Total claims: #{@from} - #{@to}"
      = pie_chart @dummy_data_1, id: "total-claims-chart", legend: 'bottom'
    .govuk-grid-column-one-half
      %h2
        = "Total value of claims: #{@from} - #{@to}"
      = column_chart @dummy_data_2, id: "total-claim-values-chart"

  .govuk-grid-column-full
    %br

  .govuk-grid-row
    .govuk-grid-column-full
      %h2
        = "Total claims over six months: #{6.months.ago.strftime("%B")} - #{Date.today.strftime("%B")}"
      = line_chart @dummy_data_3, id: "six-month-chart"

