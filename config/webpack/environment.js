const { environment } = require('@rails/webpacker')
const ConcatPlugin = require('webpack-concat-plugin')

environment.plugins.append('ConcatPlugin', new ConcatPlugin({
  uglify: true,
  sourceMap: true,
  outputPath: 'js',
  fileName: 'application.bundle.js',
  filesToConcat: [
    './app/webpack/javascripts/vendor/polyfill.object.keys.js',
    'jquery',
    'jquery-ujs',
    'jquery.iframe-transport',
    './app/webpack/javascripts/vendor/jquery.remotipart.js',
    'cocoon/app/assets/javascripts/cocoon.js',
    'dropzone',
    './app/webpack/javascripts/vendor/bind.js',
    'govuk_frontend_toolkit/javascripts/govuk/stick-at-top-when-scrolling.js',
    'govuk_frontend_toolkit/javascripts/govuk/stop-scrolling-at-footer.js',
    './app/webpack/javascripts/vendor/moj.js',
    './app/webpack/javascripts/vendor/moj.cookie-message.js',
    'jquery-accessible-accordion-aria',
    './app/webpack/javascripts/vendor/typeahead-aria.js',
    './app/webpack/javascripts/vendor/jquery.jq-element-revealer.js',
    './app/webpack/javascripts/vendor/jquery.datatables.min.js',
    'jsrender',
    'jquery-highlight',
    'jquery-throttle-debounce',
    'accessible-autocomplete',
    './app/webpack/javascripts/modules/Helpers.API.Core.js',
    './app/webpack/javascripts/modules/Helpers.API.Distance.js',
    './app/webpack/javascripts/modules/Helpers.API.Establishments.js',
    './app/webpack/javascripts/modules/Helpers.Autocomplete.js',
    './app/webpack/javascripts/modules/Helpers.DataTables.js',
    './app/webpack/javascripts/modules/Helpers.FormControls.js',
    './app/webpack/javascripts/modules/Modules.AddEditAdvocate.js',
    './app/webpack/javascripts/modules/Modules.AllocationDataTable.js',
    './app/webpack/javascripts/modules/Modules.AllocationFilterSubmit.js',
    './app/webpack/javascripts/modules/Modules.AllocationScheme.js',
    './app/webpack/javascripts/modules/Modules.AmountAssessed.js',
    './app/webpack/javascripts/modules/Modules.Autocomplete.js',
    './app/webpack/javascripts/modules/Modules.DataTables.js',
    './app/webpack/javascripts/modules/Modules.ExpensesDataTable.js',
    './app/webpack/javascripts/modules/Modules.HideErrorOnChange.js',
    './app/webpack/javascripts/modules/Modules.Messaging.js',
    './app/webpack/javascripts/modules/Modules.OffenceSearchInput.js',
    './app/webpack/javascripts/modules/Modules.OffenceSearchView.js',
    './app/webpack/javascripts/modules/Modules.OffenceSelectedView.js',
    './app/webpack/javascripts/modules/Modules.Providers.js',
    './app/webpack/javascripts/modules/Modules.SelectAll.js',
    './app/webpack/javascripts/modules/Modules.TableRowClick.js',
    './app/webpack/javascripts/modules/Plugin.jqDataTable.filter.js',
    './app/webpack/javascripts/modules/case_worker/Allocation.js',
    './app/webpack/javascripts/modules/case_worker/ReAllocation.js',
    './app/webpack/javascripts/modules/case_worker/admin/Modules.ManagementInformation.js',
    './app/webpack/javascripts/modules/case_worker/claims/DeterminationCalculator.js',
    './app/webpack/javascripts/modules/details.polyfill.js',
    './app/webpack/javascripts/modules/external_users/claims/BasicFeeDateCtrl.js',
    './app/webpack/javascripts/modules/external_users/claims/BlockHelpers.js',
    './app/webpack/javascripts/modules/external_users/claims/CaseTypeCtrl.js',
    './app/webpack/javascripts/modules/external_users/claims/ClaimIntentions.js',
    './app/webpack/javascripts/modules/external_users/claims/CocoonHelper.js',
    './app/webpack/javascripts/modules/external_users/claims/DisbursementsCtrl.js',
    './app/webpack/javascripts/modules/external_users/claims/Dropzone.js',
    './app/webpack/javascripts/modules/external_users/claims/DuplicateExpenseCtrl.js',
    './app/webpack/javascripts/modules/external_users/claims/FeeFieldsDisplay.js',
    './app/webpack/javascripts/modules/external_users/claims/FeePopulator.js',
    './app/webpack/javascripts/modules/external_users/claims/FeeSectionDisplay.js',
    './app/webpack/javascripts/modules/external_users/claims/InterimFeeFieldsDisplay.js',
    './app/webpack/javascripts/modules/external_users/claims/NewClaim.js',
    './app/webpack/javascripts/modules/external_users/claims/OffenceCtrl.js',
    './app/webpack/javascripts/modules/external_users/claims/SchemeFilter.js',
    './app/webpack/javascripts/modules/external_users/claims/SideBar.js',
    './app/webpack/javascripts/modules/external_users/claims/TransferDetailFieldsDisplay.js',
    './app/webpack/javascripts/modules/external_users/claims/TransferDetailsCtrl.js',
    './app/webpack/javascripts/modules/external_users/claims/fee_calculator/FeeCalculator.GraduatedPrice.js',
    './app/webpack/javascripts/modules/external_users/claims/fee_calculator/FeeCalculator.UnitPrice.js',
    './app/webpack/javascripts/modules/external_users/claims/fee_calculator/FeeCalculator.js',
    './app/webpack/javascripts/modules/show-hide-content.js',
    './app/webpack/javascripts/plugins/jquery.numbered.elements.js',
    './app/webpack/javascripts/application.js'
  ]
}))

module.exports = environment
